/* 
**************************************************************************************************************************************************
Developer Name 			: 	Dhiraj Lohar
Created Date 			:	21-02-2024
Class Name 				: 	SCIS_EPC_Data
TestClass Name 			: 	SCIS_EPC_DataTest
Connected				: 	SCIS_EPC_Data_helper
@Description 			: 	This is test class for SCIS_EPC_Data.
							* @param req The HTTP request being sent.
         					* @return HTTPResponse The simulated HTTP response.
Last Modification Date 	: 	
Last Modified By 		:	Dhiraj Lohar
Modification Description:	NO MODIFICATION YET. (PLEASE WRITE MODIFICATION IN BULLETS WITH MODIFICATION DATE)
************************************************************************************************************************************************** */

/**
 * Test class for SCIS_EPC_Data.
 */
@isTest
public class SCIS_EPC_DataTest {
    
    // Mock class to simulate HTTP callouts
    private class MockHttpCalloutEPCData implements HttpCalloutMock {
        /**
         * Simulates HTTP response for callout.
         * @param req The HTTP request being sent.
         * @return HTTPResponse The simulated HTTP response.
         */
        public HTTPResponse respond(HTTPRequest req) {
            // Instantiate a new HttpResponse object
            HttpResponse res = new HttpResponse();
            res.setHeader('Content-Type', 'application/json');
            res.setStatusCode(200);
            // Simulate a JSON response
            res.setBody('{ "column-names": [ "lmk-key", "address1", "address2", "address3", "postcode", "building-reference-number", "current-energy-rating", "potential-energy-rating", "current-energy-efficiency", "potential-energy-efficiency", "property-type", "built-form", "inspection-date", "local-authority", "constituency", "county", "lodgement-date", "transaction-type", "environment-impact-current", "environment-impact-potential", "energy-consumption-current", "energy-consumption-potential", "co2-emissions-current", "co2-emiss-curr-per-floor-area", "co2-emissions-potential", "lighting-cost-current", "lighting-cost-potential", "heating-cost-current", "heating-cost-potential", "hot-water-cost-current", "hot-water-cost-potential", "total-floor-area", "energy-tariff", "mains-gas-flag", "floor-level", "flat-top-storey", "flat-storey-count", "main-heating-controls", "multi-glaze-proportion", "glazed-type", "glazed-area", "extension-count", "number-habitable-rooms", "number-heated-rooms", "low-energy-lighting", "number-open-fireplaces", "hotwater-description", "hot-water-energy-eff", "hot-water-env-eff", "floor-description", "floor-energy-eff", "floor-env-eff", "windows-description", "windows-energy-eff", "windows-env-eff", "walls-description", "walls-energy-eff", "walls-env-eff", "secondheat-description", "sheating-energy-eff", "sheating-env-eff", "roof-description", "roof-energy-eff", "roof-env-eff", "mainheat-description", "mainheat-energy-eff", "mainheat-env-eff", "mainheatcont-description", "mainheatc-energy-eff", "mainheatc-env-eff", "lighting-description", "lighting-energy-eff", "lighting-env-eff", "main-fuel", "wind-turbine-count", "heat-loss-corridor", "unheated-corridor-length", "floor-height", "photo-supply", "solar-water-heating-flag", "mechanical-ventilation", "address", "local-authority-label", "constituency-label", "posttown", "construction-age-band", "lodgement-datetime", "tenure", "fixed-lighting-outlets-count", "low-energy-fixed-light-count", "uprn", "uprn-source" ], "rows": [ { "low-energy-fixed-light-count": "", "address": "34 Langham Gardens, Edgware", "uprn-source": "Energy Assessor", "floor-height": "2.4", "heating-cost-potential": "623", "unheated-corridor-length": "", "hot-water-cost-potential": "202", "construction-age-band": "England and Wales: 1900-1929", "potential-energy-rating": "B", "mainheat-energy-eff": "Good", "windows-env-eff": "Average", "lighting-energy-eff": "Very Good", "environment-impact-potential": "89", "glazed-type": "double glazing installed before 2002", "heating-cost-current": "1059", "address3": "", "mainheatcont-description": "Programmer, room thermostat and TRVs", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Barnet", "fixed-lighting-outlets-count": "8", "energy-tariff": "Single", "mechanical-ventilation": "natural", "hot-water-cost-current": "317", "county": "", "postcode": "HA8 9EG", "solar-water-heating-flag": "N", "constituency": "E14000741", "co2-emissions-potential": "0.7", "number-heated-rooms": "3", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "58", "local-authority": "E09000003", "built-form": "Mid-Terrace", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "Normal", "inspection-date": "2023-06-13", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "43", "address1": "34 Langham Gardens", "heat-loss-corridor": "", "flat-storey-count": "", "constituency-label": "Hendon", "roof-energy-eff": "Average", "total-floor-area": "65.0", "building-reference-number": "10005266959", "environment-impact-current": "63", "co2-emissions-current": "2.8", "roof-description": "Pitched, 75 mm loft insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "3", "address2": "Edgware", "hot-water-env-eff": "Good", "posttown": "Middlesex", "mainheatc-energy-eff": "Good", "main-fuel": "mains gas (not community)", "lighting-env-eff": "Very Good", "windows-energy-eff": "Average", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in 88% of fixed outlets", "roof-env-eff": "Average", "walls-energy-eff": "Very Poor", "photo-supply": "0.0", "lighting-cost-potential": "121", "mainheat-env-eff": "Good", "multi-glaze-proportion": "100", "main-heating-controls": "", "lodgement-datetime": "2023-11-30 16:11:22", "flat-top-storey": "", "current-energy-rating": "D", "secondheat-description": "None", "walls-env-eff": "Very Poor", "transaction-type": "rental", "uprn": "200071046", "current-energy-efficiency": "66", "energy-consumption-current": "244", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "121", "lodgement-date": "2023-11-30", "extension-count": "0", "mainheatc-env-eff": "Good", "lmk-key": "b36598649465a99eeb0b8613de93940336523ea3cee2c7a25fae7b876d9e19f1", "wind-turbine-count": "0", "tenure": "Rented (social)", "floor-level": "", "potential-energy-efficiency": "89", "hot-water-energy-eff": "Good", "low-energy-lighting": "88", "walls-description": "Solid brick, as built, no insulation (assumed)", "hotwater-description": "From main system" }, { "low-energy-fixed-light-count": "", "address": "34 Langham Gardens", "uprn-source": "Energy Assessor", "floor-height": "2.44", "heating-cost-potential": "301", "unheated-corridor-length": "", "hot-water-cost-potential": "64", "construction-age-band": "England and Wales: 1930-1949", "potential-energy-rating": "B", "mainheat-energy-eff": "Good", "windows-env-eff": "Good", "lighting-energy-eff": "Poor", "environment-impact-potential": "90", "glazed-type": "double glazing installed during or after 2002", "heating-cost-current": "613", "address3": "", "mainheatcont-description": "Programmer and room thermostat", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Barnet", "fixed-lighting-outlets-count": "10", "energy-tariff": "Single", "mechanical-ventilation": "natural", "hot-water-cost-current": "125", "county": "", "postcode": "HA8 9EG", "solar-water-heating-flag": "N", "constituency": "E14000741", "co2-emissions-potential": "0.7", "number-heated-rooms": "3", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "55", "local-authority": "E09000003", "built-form": "Mid-Terrace", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "Normal", "inspection-date": "2021-11-29", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "61", "address1": "34 Langham Gardens", "heat-loss-corridor": "", "flat-storey-count": "", "constituency-label": "Hendon", "roof-energy-eff": "Very Poor", "total-floor-area": "64.0", "building-reference-number": "10001941445", "environment-impact-current": "50", "co2-emissions-current": "3.9", "roof-description": "Pitched, no insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "3", "address2": "", "hot-water-env-eff": "Good", "posttown": "EDGWARE", "mainheatc-energy-eff": "Average", "main-fuel": "mains gas (not community)", "lighting-env-eff": "Poor", "windows-energy-eff": "Good", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in 20% of fixed outlets", "roof-env-eff": "Very Poor", "walls-energy-eff": "Very Poor", "photo-supply": "0.0", "lighting-cost-potential": "55", "mainheat-env-eff": "Good", "multi-glaze-proportion": "100", "main-heating-controls": "", "lodgement-datetime": "2021-12-01 11:53:16", "flat-top-storey": "", "current-energy-rating": "D", "secondheat-description": "None", "walls-env-eff": "Very Poor", "transaction-type": "rental", "uprn": "200071046", "current-energy-efficiency": "56", "energy-consumption-current": "345", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "99", "lodgement-date": "2021-12-01", "extension-count": "1", "mainheatc-env-eff": "Average", "lmk-key": "0bec0b8fabb15662f935adfaba7432e9b2083487f5e5297c4c66375eb36bef49", "wind-turbine-count": "0", "tenure": "Rented (social)", "floor-level": "", "potential-energy-efficiency": "90", "hot-water-energy-eff": "Good", "low-energy-lighting": "20", "walls-description": "Solid brick, as built, no insulation (assumed)", "hotwater-description": "From main system" }, { "low-energy-fixed-light-count": "", "address": "34 LANGHAM GARDENS", "uprn-source": "Energy Assessor", "floor-height": "2.49", "heating-cost-potential": "359", "unheated-corridor-length": "", "hot-water-cost-potential": "62", "construction-age-band": "England and Wales: 1930-1949", "potential-energy-rating": "B", "mainheat-energy-eff": "Good", "windows-env-eff": "Average", "lighting-energy-eff": "Very Good", "environment-impact-potential": "87", "glazed-type": "double glazing, unknown install date", "heating-cost-current": "662", "address3": "", "mainheatcont-description": "Programmer, room thermostat and TRVs", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Brent", "fixed-lighting-outlets-count": "9", "energy-tariff": "Single", "mechanical-ventilation": "natural", "hot-water-cost-current": "90", "county": "", "postcode": "HA0 3RG", "solar-water-heating-flag": "N", "constituency": "E14000592", "co2-emissions-potential": "1.0", "number-heated-rooms": "5", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "56", "local-authority": "E09000005", "built-form": "Semi-Detached", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "Normal", "inspection-date": "2021-06-19", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "39", "address1": "34 LANGHAM GARDENS", "heat-loss-corridor": "", "flat-storey-count": "", "constituency-label": "Brent North", "roof-energy-eff": "Poor", "total-floor-area": "96.0", "building-reference-number": "10001067070", "environment-impact-current": "59", "co2-emissions-current": "3.8", "roof-description": "Pitched, 50 mm loft insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "5", "address2": "", "hot-water-env-eff": "Good", "posttown": "WEMBLEY", "mainheatc-energy-eff": "Good", "main-fuel": "mains gas (not community)", "lighting-env-eff": "Very Good", "windows-energy-eff": "Average", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in all fixed outlets", "roof-env-eff": "Poor", "walls-energy-eff": "Very Poor", "photo-supply": "0.0", "lighting-cost-potential": "75", "mainheat-env-eff": "Good", "multi-glaze-proportion": "100", "main-heating-controls": "", "lodgement-datetime": "2021-06-21 09:25:46", "flat-top-storey": "", "current-energy-rating": "D", "secondheat-description": "None", "walls-env-eff": "Very Poor", "transaction-type": "rental", "uprn": "202076316", "current-energy-efficiency": "65", "energy-consumption-current": "224", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "75", "lodgement-date": "2021-06-21", "extension-count": "0", "mainheatc-env-eff": "Good", "lmk-key": "4f2157ef02259925c32a9e689bac2b2505b4a081b1e5f86946e2d899f47eaef1", "wind-turbine-count": "0", "tenure": "Rented (private)", "floor-level": "", "potential-energy-efficiency": "88", "hot-water-energy-eff": "Good", "low-energy-lighting": "100", "walls-description": "Solid brick, as built, no insulation (assumed)", "hotwater-description": "From main system" }, { "low-energy-fixed-light-count": "4", "address": "34, Langham Gardens", "uprn-source": "Address Matched", "floor-height": "", "heating-cost-potential": "416", "unheated-corridor-length": "", "hot-water-cost-potential": "74", "construction-age-band": "England and Wales: 1900-1929", "potential-energy-rating": "B", "mainheat-energy-eff": "Good", "windows-env-eff": "Average", "lighting-energy-eff": "Average", "environment-impact-potential": "86", "glazed-type": "double glazing installed before 2002", "heating-cost-current": "747", "address3": "", "mainheatcont-description": "TRVs and bypass", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Brent", "fixed-lighting-outlets-count": "14", "energy-tariff": "Unknown", "mechanical-ventilation": "natural", "hot-water-cost-current": "150", "county": "Greater London Authority", "postcode": "HA0 3RG", "solar-water-heating-flag": "", "constituency": "E14000592", "co2-emissions-potential": "1.2", "number-heated-rooms": "5", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "68", "local-authority": "E09000005", "built-form": "Semi-Detached", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "Normal", "inspection-date": "2013-11-13", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "51", "address1": "34, Langham Gardens", "heat-loss-corridor": "NO DATA!", "flat-storey-count": "", "constituency-label": "Brent North", "roof-energy-eff": "Poor", "total-floor-area": "89.0", "building-reference-number": "9345336178", "environment-impact-current": "53", "co2-emissions-current": "4.5", "roof-description": "Pitched, 25 mm loft insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "5", "address2": "", "hot-water-env-eff": "Average", "posttown": "WEMBLEY", "mainheatc-energy-eff": "Average", "main-fuel": "mains gas (not community)", "lighting-env-eff": "Average", "windows-energy-eff": "Average", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in 29% of fixed outlets", "roof-env-eff": "Poor", "walls-energy-eff": "Very Poor", "photo-supply": "0.0", "lighting-cost-potential": "51", "mainheat-env-eff": "Good", "multi-glaze-proportion": "100", "main-heating-controls": "2111", "lodgement-datetime": "2013-11-13 13:01:35", "flat-top-storey": "", "current-energy-rating": "D", "secondheat-description": "None", "walls-env-eff": "Very Poor", "transaction-type": "rental (social)", "uprn": "202076316", "current-energy-efficiency": "57", "energy-consumption-current": "264", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "87", "lodgement-date": "2013-11-13", "extension-count": "0", "mainheatc-env-eff": "Average", "lmk-key": "1042782099732013111313013555978393", "wind-turbine-count": "0", "tenure": "rental (social)", "floor-level": "NODATA!", "potential-energy-efficiency": "86", "hot-water-energy-eff": "Average", "low-energy-lighting": "29", "walls-description": "Solid brick, as built, no insulation (assumed)", "hotwater-description": "From main system, no cylinder thermostat" }, { "low-energy-fixed-light-count": "48", "address": "34, Langham Gardens", "uprn-source": "Address Matched", "floor-height": "", "heating-cost-potential": "755", "unheated-corridor-length": "", "hot-water-cost-potential": "78", "construction-age-band": "England and Wales: 1930-1949", "potential-energy-rating": "B", "mainheat-energy-eff": "Good", "windows-env-eff": "Good", "lighting-energy-eff": "Very Good", "environment-impact-potential": "79", "glazed-type": "double glazing installed during or after 2002", "heating-cost-current": "939", "address3": "", "mainheatcont-description": "Programmer, room thermostat and TRVs", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Enfield", "fixed-lighting-outlets-count": "52", "energy-tariff": "Single", "mechanical-ventilation": "natural", "hot-water-cost-current": "124", "county": "Greater London Authority", "postcode": "N21 1DJ", "solar-water-heating-flag": "", "constituency": "E14000692", "co2-emissions-potential": "3.2", "number-heated-rooms": "7", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "93", "local-authority": "E09000010", "built-form": "Semi-Detached", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "More Than Typical", "inspection-date": "2013-07-08", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "31", "address1": "34, Langham Gardens", "heat-loss-corridor": "NO DATA!", "flat-storey-count": "", "constituency-label": "Enfield, Southgate", "roof-energy-eff": "Very Poor", "total-floor-area": "176.0", "building-reference-number": "9719590968", "environment-impact-current": "65", "co2-emissions-current": "5.4", "roof-description": "Pitched, no insulation (assumed)", "floor-energy-eff": "N/A", "number-habitable-rooms": "7", "address2": "", "hot-water-env-eff": "Good", "posttown": "LONDON", "mainheatc-energy-eff": "Good", "main-fuel": "mains gas (not community)", "lighting-env-eff": "Very Good", "windows-energy-eff": "Good", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in 92% of fixed outlets", "roof-env-eff": "Very Poor", "walls-energy-eff": "Very Poor", "photo-supply": "0.0", "lighting-cost-potential": "81", "mainheat-env-eff": "Good", "multi-glaze-proportion": "100", "main-heating-controls": "2106", "lodgement-datetime": "2013-07-18 09:51:34", "flat-top-storey": "", "current-energy-rating": "C", "secondheat-description": "None", "walls-env-eff": "Very Poor", "transaction-type": "marketed sale", "uprn": "207124388", "current-energy-efficiency": "69", "energy-consumption-current": "159", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "81", "lodgement-date": "2013-07-18", "extension-count": "1", "mainheatc-env-eff": "Good", "lmk-key": "690084545312013071809513499070997", "wind-turbine-count": "0", "tenure": "owner-occupied", "floor-level": "NODATA!", "potential-energy-efficiency": "81", "hot-water-energy-eff": "Good", "low-energy-lighting": "92", "walls-description": "Solid brick, as built, no insulation (assumed)", "hotwater-description": "From main system" }, { "low-energy-fixed-light-count": "6", "address": "34, Langham Gardens", "uprn-source": "Address Matched", "floor-height": "", "heating-cost-potential": "320", "unheated-corridor-length": "", "hot-water-cost-potential": "76", "construction-age-band": "England and Wales: 1983-1990", "potential-energy-rating": "B", "mainheat-energy-eff": "Poor", "windows-env-eff": "Good", "lighting-energy-eff": "Very Good", "environment-impact-potential": "70", "glazed-type": "double glazing installed during or after 2002", "heating-cost-current": "551", "address3": "", "mainheatcont-description": "Appliance thermostats", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Somerset West and Taunton", "fixed-lighting-outlets-count": "6", "energy-tariff": "dual", "mechanical-ventilation": "natural", "hot-water-cost-current": "145", "county": "Somerset", "postcode": "TA1 4PE", "solar-water-heating-flag": "", "constituency": "E14000988", "co2-emissions-potential": "2.0", "number-heated-rooms": "2", "floor-description": "Solid, no insulation (assumed)", "energy-consumption-potential": "184", "local-authority": "E07000246", "built-form": "End-Terrace", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "Normal", "inspection-date": "2013-01-12", "mains-gas-flag": "N", "co2-emiss-curr-per-floor-area": "59", "address1": "34, Langham Gardens", "heat-loss-corridor": "NO DATA!", "flat-storey-count": "", "constituency-label": "Taunton Deane", "roof-energy-eff": "Good", "total-floor-area": "61.0", "building-reference-number": "6042578468", "environment-impact-current": "52", "co2-emissions-current": "3.6", "roof-description": "Pitched, 250 mm loft insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "4", "address2": "", "hot-water-env-eff": "Very Poor", "posttown": "TAUNTON", "mainheatc-energy-eff": "Good", "main-fuel": "electricity (not community)", "lighting-env-eff": "Very Good", "windows-energy-eff": "Good", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in all fixed outlets", "roof-env-eff": "Good", "walls-energy-eff": "Good", "photo-supply": "0.0", "lighting-cost-potential": "40", "mainheat-env-eff": "Very Poor", "multi-glaze-proportion": "100", "main-heating-controls": "2602", "lodgement-datetime": "2013-01-12 17:05:29", "flat-top-storey": "", "current-energy-rating": "D", "secondheat-description": "Portable electric heaters (assumed)", "walls-env-eff": "Good", "transaction-type": "FiT application", "uprn": "100040932620", "current-energy-efficiency": "60", "energy-consumption-current": "332", "mainheat-description": "Room heaters, electric", "lighting-cost-current": "37", "lodgement-date": "2013-01-12", "extension-count": "0", "mainheatc-env-eff": "Good", "lmk-key": "116174369732013011217052942968500", "wind-turbine-count": "0", "tenure": "owner-occupied", "floor-level": "NODATA!", "potential-energy-efficiency": "88", "hot-water-energy-eff": "Average", "low-energy-lighting": "100", "walls-description": "Cavity wall, as built, insulated (assumed)", "hotwater-description": "Electric immersion, off-peak" }, { "low-energy-fixed-light-count": "5", "address": "34, Langham Gardens", "uprn-source": "Address Matched", "floor-height": "2.5", "heating-cost-potential": "844", "unheated-corridor-length": "", "hot-water-cost-potential": "111", "construction-age-band": "England and Wales: 1900-1929", "potential-energy-rating": "D", "mainheat-energy-eff": "Good", "windows-env-eff": "Average", "lighting-energy-eff": "Good", "environment-impact-potential": "59", "glazed-type": "secondary glazing", "heating-cost-current": "1076", "address3": "", "mainheatcont-description": "Programmer, TRVs and bypass", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Enfield", "fixed-lighting-outlets-count": "11", "energy-tariff": "Single", "mechanical-ventilation": "natural", "hot-water-cost-current": "188", "county": "Greater London Authority", "postcode": "N21 1DJ", "solar-water-heating-flag": "", "constituency": "E14000692", "co2-emissions-potential": "5.1", "number-heated-rooms": "5", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "216", "local-authority": "E09000010", "built-form": "Semi-Detached", "number-open-fireplaces": "0", "windows-description": "Mostly secondary glazing", "glazed-area": "Normal", "inspection-date": "2011-10-13", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "57", "address1": "34, Langham Gardens", "heat-loss-corridor": "NO DATA!", "flat-storey-count": "", "constituency-label": "Enfield, Southgate", "roof-energy-eff": "Good", "total-floor-area": "122.63", "building-reference-number": "9719590968", "environment-impact-current": "46", "co2-emissions-current": "7.0", "roof-description": "Pitched, 150 mm loft insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "5", "address2": "", "hot-water-env-eff": "Poor", "posttown": "LONDON", "mainheatc-energy-eff": "Average", "main-fuel": "mains gas (not community)", "lighting-env-eff": "Good", "windows-energy-eff": "Average", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in 45% of fixed outlets", "roof-env-eff": "Good", "walls-energy-eff": "Very Poor", "photo-supply": "0.0", "lighting-cost-potential": "58", "mainheat-env-eff": "Good", "multi-glaze-proportion": "90", "main-heating-controls": "2107", "lodgement-datetime": "2011-10-14 15:21:40", "flat-top-storey": "", "current-energy-rating": "E", "secondheat-description": "None", "walls-env-eff": "Very Poor", "transaction-type": "marketed sale", "uprn": "207124388", "current-energy-efficiency": "52", "energy-consumption-current": "297", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "90", "lodgement-date": "2011-10-14", "extension-count": "1", "mainheatc-env-eff": "Average", "lmk-key": "690084559922011101415214070178599", "wind-turbine-count": "0", "tenure": "owner-occupied", "floor-level": "NODATA!", "potential-energy-efficiency": "64", "hot-water-energy-eff": "Poor", "low-energy-lighting": "45", "walls-description": "Solid brick, as built, no insulation (assumed)", "hotwater-description": "From main system, no cylinder thermostat" }, { "low-energy-fixed-light-count": "", "address": "34, Langham Gardens", "uprn-source": "Address Matched", "floor-height": "2.43", "heating-cost-potential": "333", "unheated-corridor-length": "", "hot-water-cost-potential": "100", "construction-age-band": "England and Wales: 1950-1966", "potential-energy-rating": "C", "mainheat-energy-eff": "Good", "windows-env-eff": "Good", "lighting-energy-eff": "Very Good", "environment-impact-potential": "76", "glazed-type": "double glazing installed during or after 2002", "heating-cost-current": "484", "address3": "", "mainheatcont-description": "Programmer, room thermostat and TRVs", "sheating-energy-eff": "N/A", "property-type": "House", "local-authority-label": "Barnet", "fixed-lighting-outlets-count": "", "energy-tariff": "Single", "mechanical-ventilation": "natural", "hot-water-cost-current": "155", "county": "Greater London Authority", "postcode": "HA8 9EG", "solar-water-heating-flag": "N", "constituency": "E14000741", "co2-emissions-potential": "2.0", "number-heated-rooms": "4", "floor-description": "Suspended, no insulation (assumed)", "energy-consumption-potential": "184", "local-authority": "E09000003", "built-form": "Mid-Terrace", "number-open-fireplaces": "0", "windows-description": "Fully double glazed", "glazed-area": "Normal", "inspection-date": "2010-05-05", "mains-gas-flag": "Y", "co2-emiss-curr-per-floor-area": "49", "address1": "34, Langham Gardens", "heat-loss-corridor": "NO DATA!", "flat-storey-count": "", "constituency-label": "Hendon", "roof-energy-eff": "Poor", "total-floor-area": "65.69", "building-reference-number": "1483365768", "environment-impact-current": "61", "co2-emissions-current": "3.2", "roof-description": "Pitched, 50 mm loft insulation", "floor-energy-eff": "N/A", "number-habitable-rooms": "4", "address2": "", "hot-water-env-eff": "Good", "posttown": "EDGWARE", "mainheatc-energy-eff": "Good", "main-fuel": "mains gas - this is for backwards compatibility only and should not be used", "lighting-env-eff": "Very Good", "windows-energy-eff": "Good", "floor-env-eff": "N/A", "sheating-env-eff": "N/A", "lighting-description": "Low energy lighting in 88% of fixed outlets", "roof-env-eff": "Poor", "walls-energy-eff": "Poor", "photo-supply": "0.0", "lighting-cost-potential": "38", "mainheat-env-eff": "Good", "multi-glaze-proportion": "100", "main-heating-controls": "2106", "lodgement-datetime": "2010-05-06 17:08:42", "flat-top-storey": "", "current-energy-rating": "D", "secondheat-description": "Room heaters, electric", "walls-env-eff": "Poor", "transaction-type": "rental (social)", "uprn": "200071046", "current-energy-efficiency": "64", "energy-consumption-current": "295", "mainheat-description": "Boiler and radiators, mains gas", "lighting-cost-current": "38", "lodgement-date": "2010-05-06", "extension-count": "0", "mainheatc-env-eff": "Good", "lmk-key": "480223139022010050617084245758010", "wind-turbine-count": "0", "tenure": "rental (social)", "floor-level": "NO DATA!", "potential-energy-efficiency": "77", "hot-water-energy-eff": "Good", "low-energy-lighting": "88", "walls-description": "Cavity wall, as built, no insulation (assumed)", "hotwater-description": "From main system" } ]}');
            return res;
        }
    }
	/**
     * Test method to check if data is correctly parsed from the EPC API response.
     */                        
	@isTest
    static void testGetEpcData() {
        // Setup - Create a Lead with a specific UPRN
        Lead testLead = new Lead(
            LastName = 'Test Lead',
            Company = 'Test Company',
            uprn__c = '12345' // Assume this matches the UPRN you'll use in the test
        );
        insert testLead;

        // Set the mock callout class
        Test.setMock(HttpCalloutMock.class, new MockHttpCalloutEPCData());

        Test.startTest();
        // Execute the method to test
        String result = SCIS_EPC_Data.getEpcData('12345');
        Test.stopTest();

        // Verify the method's response
        System.assertEquals('Executed successfully', result, 'The method did not execute as expected.');

        // Query the updated lead
        Lead updatedLead = [SELECT EPC_Data__c, is_EPC_Available__c FROM Lead WHERE Id = :testLead.Id];
        
        // Assert that the EPC data was updated correctly
        System.assertNotEquals(null, updatedLead.EPC_Data__c, 'EPC Data was not updated.');
        System.assertEquals(true, updatedLead.is_EPC_Available__c, 'EPC availability flag was not set to true.');
    }

}